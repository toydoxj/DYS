# DYS 프로젝트 모듈화 리팩토링 계획

## 현재 문제점

1. **UI/DYL.py** - 2390줄의 거대한 단일 파일
   - 모든 UI, 비즈니스 로직, 이벤트 핸들러가 하나의 파일에 집중
   - 유지보수 어려움
   - 테스트 불가능
   - 코드 재사용 어려움

2. **DYL/** 폴더 - MVC 구조가 있지만 실제로 사용되지 않음
   - UI/DYL.py가 메인으로 사용됨
   - 구조는 있지만 기능이 분리되지 않음

## 새로운 모듈화 구조

```
dys/
├── main.py                    # 애플리케이션 진입점
├── config/                    # 설정 관리
│   ├── __init__.py
│   ├── settings.py           # 애플리케이션 설정
│   └── constants.py          # 상수 정의
├── core/                      # 핵심 비즈니스 로직
│   ├── __init__.py
│   ├── models/               # 데이터 모델
│   │   ├── __init__.py
│   │   ├── project.py        # 프로젝트 정보 모델
│   │   ├── load.py           # 하중 데이터 모델
│   │   └── base.py           # 기본 모델 클래스
│   ├── services/             # 비즈니스 로직 서비스
│   │   ├── __init__.py
│   │   ├── project_service.py
│   │   ├── load_service.py
│   │   ├── file_service.py   # 파일 I/O 서비스
│   │   └── calculation_service.py  # 계산 서비스
│   └── repositories/         # 데이터 저장소
│       ├── __init__.py
│       └── file_repository.py
├── ui/                        # UI 관련
│   ├── __init__.py
│   ├── main_window.py        # 메인 윈도우
│   ├── widgets/              # 재사용 가능한 위젯
│   │   ├── __init__.py
│   │   ├── left_menu.py      # 좌측 메뉴
│   │   ├── header.py         # 헤더
│   │   └── custom_widgets.py # 커스텀 위젯
│   └── pages/                # 각 페이지
│       ├── __init__.py
│       ├── info_page.py      # 프로젝트 정보 페이지
│       ├── gravity_load_page.py  # 중력하중 페이지
│       ├── wind_load_page.py    # 풍하중 페이지
│       ├── earthquake_load_page.py  # 지진하중 페이지
│       └── load_combination_page.py # 하중조합 페이지
├── utils/                     # 유틸리티
│   ├── __init__.py
│   ├── file_io.py            # 파일 I/O 유틸리티
│   ├── csv_loader.py         # CSV 로더
│   ├── validators.py         # 입력 검증
│   └── helpers.py            # 헬퍼 함수
├── external/                  # 외부 모듈 (기존 모듈들)
│   ├── __init__.py
│   ├── win32/                # Win32 모듈
│   ├── dysteel/              # DYSteel 모듈
│   └── kds/                  # KDS 모듈
└── resources/                 # 리소스 파일
    ├── icons/
    └── forms/
```

## 리팩토링 단계

### 1단계: 기본 구조 생성
- 새로운 디렉토리 구조 생성
- 기본 모듈 파일 생성

### 2단계: 유틸리티 모듈 분리
- 파일 I/O 로직 분리
- CSV 로더 분리
- 검증 로직 분리

### 3단계: 모델 분리
- 프로젝트 정보 모델
- 하중 데이터 모델
- 데이터 구조 정의

### 4단계: 서비스 레이어 생성
- 비즈니스 로직을 서비스로 분리
- 파일 관리 서비스
- 계산 서비스

### 5단계: UI 위젯 분리
- 재사용 가능한 위젯 분리
- 좌측 메뉴 분리
- 헤더 분리

### 6단계: 페이지 모듈화
- 각 페이지를 독립적인 모듈로 분리
- 페이지별 컨트롤러 연결

### 7단계: 메인 윈도우 리팩토링
- 메인 윈도우를 깔끔하게 정리
- 의존성 주입

### 8단계: 통합 및 테스트
- 모든 모듈 통합
- 기존 기능 동작 확인

## 설계 원칙

1. **단일 책임 원칙**: 각 모듈은 하나의 책임만 가짐
2. **의존성 역전**: 고수준 모듈이 저수준 모듈에 의존하지 않음
3. **인터페이스 분리**: 클라이언트가 사용하지 않는 인터페이스에 의존하지 않음
4. **개방-폐쇄 원칙**: 확장에는 열려있고 수정에는 닫혀있음

## 마이그레이션 전략

1. 기존 코드는 유지하면서 새 구조로 점진적 마이그레이션
2. 각 모듈을 독립적으로 테스트 가능하도록 설계
3. 기존 기능과 호환성 유지
